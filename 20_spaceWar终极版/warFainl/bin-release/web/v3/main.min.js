var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},hpBorder=function(t){function e(){var e=t.call(this)||this;return e.hpBorder=new egret.Bitmap,e.hpBorder.texture=RES.getRes("hpb_png"),e.x=15,e.y=10,e.scaleX=.12,e.scaleY=.05,e.addChild(e.hpBorder),e}return __extends(e,t),e}(egret.DisplayObjectContainer);__reflect(hpBorder.prototype,"hpBorder");var backGround=function(t){function e(){var e=t.call(this)||this;e.bgstage=egret.MainContext.instance.stage,e.bg1_roll=1,e.bg2_roll=0,e.bg1=new egret.Bitmap,e.bg1.texture=RES.getRes("bg_jpg"),e.bg2=new egret.Bitmap,e.bg2.texture=RES.getRes("bg2_jpg"),e.bg1.width=e.bgstage.stageWidth,e.bg1.height=e.bgstage.stageHeight,e.bg2.width=e.bgstage.stageWidth,e.bg2.height=e.bgstage.stageHeight,e.bg2.y=-e.bg2.height,e.bg1.addEventListener(egret.Event.ENTER_FRAME,e.bgroll,e),e.bg2.addEventListener(egret.Event.ENTER_FRAME,e.bgroll,e),e.addChild(e.bg1),e.addChild(e.bg2);var i=RES.getRes("bg_music");return i.play(),e}return __extends(e,t),e.prototype.bgroll=function(){1==this.bg1_roll&&(this.bg1.y+=4,this.bg1.y>-4&&(this.bg2_roll=1),this.bg1.y>=this.bg1.height&&(this.bg1.y=-this.bg1.height,this.bg1_roll=0)),1==this.bg2_roll&&(this.bg2.y+=4,this.bg2.y>-4&&(this.bg1_roll=1),this.bg2.y>=this.bg2.height&&(this.bg2.y=-this.bg2.height,this.bg2_roll=0))},e}(egret.DisplayObjectContainer);__reflect(backGround.prototype,"backGround");var boss=function(t){function e(){var e=t.call(this)||this;return e.speed=2,e.hSpeed=1,e.turnLeft=1,e.turnRight=0,e.hit=!1,e.bossRemove=!1,e.boss_build(),e.x=200,e.y=0,e}return __extends(e,t),e.prototype.boss_build=function(){this.boss1=new egret.Bitmap,this.boss1.texture=RES.getRes("boss_png"),this.boss1.scaleX=1.2,this.boss1.scaleY=1.2,this.addChild(this.boss1);var t=RES.getRes("boosHit_json"),e=RES.getRes("boosHit_png"),i=new egret.MovieClipDataFactory(t,e);this.bossInjured=new egret.MovieClip(i.generateMovieClipData("mc_hurt")),this.bossInjured.scaleX=1.2,this.bossInjured.scaleY=1.2,this.addChild(this.bossInjured),this.bossInjured.gotoAndStop(1),this.boss1.addEventListener(egret.Event.ENTER_FRAME,this.boss_move,this)},e.prototype.boss_move=function(){this.y<120&&(this.y+=this.speed),this.y>=120&&(1==this.turnLeft&&(this.x-=this.hSpeed+2*Math.random(),this.x<0&&(this.turnLeft=0,this.turnRight=1)),1==this.turnRight&&(this.x+=this.hSpeed+2*Math.random(),this.x>400&&(this.turnLeft=1,this.turnRight=0))),1==this.hit&&(this.hit=!1,this.bossInjured.gotoAndPlay(1)),1==this.bossRemove&&(this.parent.removeChild(this),this.boss1.removeEventListener(egret.Event.ENTER_FRAME,this.boss_move,this))},e}(egret.Sprite);__reflect(boss.prototype,"boss");var bossBullet=function(t){function e(e,i){var s=t.call(this)||this;return s.hit=!1,s.recycle=!1,s.bossbover=0,s.bullet_build(),s.x=e,s.y=i,s}return __extends(e,t),e.prototype.bullet_build=function(){this.bullet=new egret.Bitmap,this.bullet.texture=RES.getRes("bossb_png"),this.bullet.scaleX=.5,this.bullet.scaleY=.5,this.addChild(this.bullet),this.addEventListener(egret.Event.ENTER_FRAME,this.box_move,this)},e.prototype.box_move=function(){0==this.hit?this.y+=16:this.parent&&(this.recycle=!0,this.parent.removeChild(this),this.removeEventListener(egret.Event.ENTER_FRAME,this.box_move,this)),this.y>1200&&this.parent&&(this.recycle=!0,this.parent.removeChild(this),this.removeEventListener(egret.Event.ENTER_FRAME,this.box_move,this)),1==this.bossbover&&(this.parent.removeChild(this),this.removeEventListener(egret.Event.ENTER_FRAME,this.box_move,this))},e.prototype.initial=function(t,e){this.hit=!1,this.recycle=!1,this.x=t,this.y=e,this.addEventListener(egret.Event.ENTER_FRAME,this.box_move,this)},e}(egret.Sprite);__reflect(bossBullet.prototype,"bossBullet");var bullet=function(t){function e(e,i){var s=t.call(this)||this;s.hit=!1,s.recycle=!1,s.bullet_build(),s.x=e,s.y=i;new sound_play("shoot");return s}return __extends(e,t),e.prototype.bullet_build=function(){this.bullet=new egret.Bitmap,this.bullet.texture=RES.getRes("bulletme_png"),this.bullet.scaleX=1.5,this.bullet.scaleY=1.5,this.addChild(this.bullet),this.addEventListener(egret.Event.ENTER_FRAME,this.box_move,this)},e.prototype.box_move=function(){0==this.hit?this.y-=16:this.parent&&(this.recycle=!0,this.parent.removeChild(this),this.removeEventListener(egret.Event.ENTER_FRAME,this.box_move,this)),this.y<0&&this.parent&&(this.recycle=!0,this.parent.removeChild(this),this.removeEventListener(egret.Event.ENTER_FRAME,this.box_move,this))},e.prototype.initial=function(t,e){this.hit=!1,this.recycle=!1,this.x=t,this.y=e,this.addEventListener(egret.Event.ENTER_FRAME,this.box_move,this);new sound_play("shoot")},e}(egret.Sprite);__reflect(bullet.prototype,"bullet");var bulletAdd=function(t){function e(e,i){var s=t.call(this)||this;s.hit=!1,s.recycle=!1,s.bullet_build(),s.x=e,s.y=i;new sound_play("shoot");return s}return __extends(e,t),e.prototype.bullet_build=function(){this.bullet=new egret.Bitmap,this.bullet.texture=RES.getRes("bbuff_png"),this.bullet.scaleX=.4,this.bullet.scaleY=.4,this.addChild(this.bullet),this.addEventListener(egret.Event.ENTER_FRAME,this.box_move,this)},e.prototype.box_move=function(){0==this.hit?this.y-=16:this.parent&&(this.recycle=!0,this.parent.removeChild(this),this.removeEventListener(egret.Event.ENTER_FRAME,this.box_move,this)),this.y<0&&this.parent&&(this.recycle=!0,this.parent.removeChild(this),this.removeEventListener(egret.Event.ENTER_FRAME,this.box_move,this))},e.prototype.initial=function(t,e){this.hit=!1,this.recycle=!1,this.x=t,this.y=e,this.addEventListener(egret.Event.ENTER_FRAME,this.box_move,this);new sound_play("shoot")},e}(egret.Sprite);__reflect(bulletAdd.prototype,"bulletAdd");var enemy1=function(t){function e(e,i){var s=t.call(this)||this;return s.hit=!1,s.recycle=!1,s.box_build(),s.x=e,s.y=i,s}return __extends(e,t),e.prototype.box_build=function(){var t=RES.getRes("enemy_json"),e=RES.getRes("enemy_png"),i=new egret.MovieClipDataFactory(t,e);this.mc=new egret.MovieClip(i.generateMovieClipData("exp")),this.addChild(this.mc),this.mc.gotoAndStop(1),this.addEventListener(egret.Event.ENTER_FRAME,this.box_move,this)},e.prototype.box_move=function(){if(0==this.hit)this.y+=10;else{this.removeEventListener(egret.Event.ENTER_FRAME,this.box_move,this),this.mc.gotoAndPlay(2,2);var t=(new sound_play("explosion_small"),this);this.mc.addEventListener(egret.Event.COMPLETE,function(e){t.parent&&(t.parent.removeChild(t),t.recycle=!0)},this)}this.y>this.stage.height&&this.parent&&(this.parent.removeChild(this),this.removeEventListener(egret.Event.ENTER_FRAME,this.box_move,this),this.recycle=!0)},e.prototype.initial=function(t,e){this.x=t,this.y=e,this.hit=!1,this.recycle=!1,this.mc.gotoAndStop(1),this.addEventListener(egret.Event.ENTER_FRAME,this.box_move,this)},e}(egret.Sprite);__reflect(enemy1.prototype,"enemy1");var enemyBullet=function(t){function e(e,i){var s=t.call(this)||this;return s.hit=!1,s.recycle=!1,s.bullet_build(),s.x=e,s.y=i,s}return __extends(e,t),e.prototype.bullet_build=function(){this.bullet=new egret.Bitmap,this.bullet.texture=RES.getRes("eb_png"),this.addChild(this.bullet),this.addEventListener(egret.Event.ENTER_FRAME,this.box_move,this)},e.prototype.box_move=function(){0==this.hit?this.y+=12:this.parent&&(this.recycle=!0,this.parent.removeChild(this),this.removeEventListener(egret.Event.ENTER_FRAME,this.box_move,this)),this.y>1200&&this.parent&&(this.recycle=!0,this.parent.removeChild(this),this.removeEventListener(egret.Event.ENTER_FRAME,this.box_move,this))},e.prototype.initial=function(t,e){this.hit=!1,this.recycle=!1,this.x=t,this.y=e,this.addEventListener(egret.Event.ENTER_FRAME,this.box_move,this)},e}(egret.Sprite);__reflect(enemyBullet.prototype,"enemyBullet");var gameover=function(t){function e(){var e=t.call(this)||this;return e.overPoint=new egret.Bitmap,e.overPoint.texture=RES.getRes("over_png"),e.x=20,e.y=500,e.overPoint.width=600,e.addChild(e.overPoint),e}return __extends(e,t),e}(egret.Sprite);__reflect(gameover.prototype,"gameover");var gamewin=function(t){function e(){var e=t.call(this)||this;return e.winPoint=new egret.Bitmap,e.winPoint.texture=RES.getRes("winPoint_png"),e.x=0,e.y=500,e.winPoint.width=650,e.addChild(e.winPoint),e}return __extends(e,t),e}(egret.Sprite);__reflect(gamewin.prototype,"gamewin");var bloodpack=function(t){function e(){var e=t.call(this)||this;return e.turnLeft=1,e.turnRight=0,e.hit=!1,e.recycle=!1,e.box_build(),e.x=400*Math.random(),e.y=0,e}return __extends(e,t),e.prototype.box_build=function(){this.bloodp=new egret.Bitmap,this.bloodp.texture=RES.getRes("hpadd_png"),this.addChild(this.bloodp),this.addEventListener(egret.Event.ENTER_FRAME,this.box_move,this)},e.prototype.box_move=function(){0==this.hit?this.y+=12:(this.recycle=!0,this.parent.removeChild(this),this.removeEventListener(egret.Event.ENTER_FRAME,this.box_move,this)),this.y>1200&&this.parent&&(this.parent.removeChild(this),this.removeEventListener(egret.Event.ENTER_FRAME,this.box_move,this),this.recycle=!0)},e.prototype.initial=function(){this.hit=!1,this.recycle=!1,this.addEventListener(egret.Event.ENTER_FRAME,this.box_move,this)},e}(egret.Sprite);__reflect(bloodpack.prototype,"bloodpack");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var touch_location=function(){function t(t,e){this.x=t,this.y=e}return t}();__reflect(touch_location.prototype,"touch_location");var Main=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},e.prototype.onResourceLoadComplete=function(t){"preload"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},e.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e.prototype.createGameScene=function(){var t=new mainStage;this.addChild(t)},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e.prototype.startAnimation=function(t){var e=this,i=new egret.HtmlTextParser,s=t.map(function(t){return i.parse(t)}),r=this.textfield,h=-1,n=function(){h++,h>=s.length&&(h=0);var t=s[h];r.textFlow=t;var i=egret.Tween.get(r);i.to({alpha:1},200),i.wait(2e3),i.to({alpha:0},200),i.call(n,e)};n()},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var mainStage=function(t){function e(){var e=t.call(this)||this;e.label=new egret.TextField,e.label2=new egret.TextField,e.score=0,e.hpv=100,e.gameModel="goOn",e.bossModel=0,e.bulletModel=0,e.limitAdd=20,e.bloodAddNum=10,e.bosshp=500,e.touch=new touch_location(200,800),e.bullet_array=[],e.bullet_arrayAdd=[],e.enemy1_array=[],e.eb_array=[],e.eboss_array=[],e.recycle_bullet=[],e.recycle_bulletAdd=[],e.recycle_bulletBoss=[],e.recycle_enemy1=[],e.recycle_eb=[],e.touchEnabled=!0;var i=new backGround;return e.addChild(i),e.hpborder=new hpBorder,e.addChild(e.hpborder),e.hpValue=new egret.Bitmap,e.hpValue.texture=RES.getRes("hpv_png"),e.hpValue.width=840,e.hpValue.height=15,e.hpValue.alpha=.7,e.hpValue.x=30,e.hpValue.y=12,e.addChild(e.hpValue),e.addEventListener(egret.Event.ENTER_FRAME,e.barChange,e),e.addEventListener(egret.Event.ENTER_FRAME,e.bossAppears,e),e.addEventListener(egret.TouchEvent.TOUCH_MOVE,e.touch_location,e),e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.touch_location,e),e.addEventListener(egret.TouchEvent.TOUCH_TAP,e.touch_location,e),e.initProps(),e.bullet_creat(),e.eb_create(),e.bossBullet_create(),e.enemy1_creat(),e.addEventListener(egret.Event.ENTER_FRAME,e.hit_target,e),e.addEventListener(egret.Event.ENTER_FRAME,e.hit_targetAdd,e),e.addEventListener(egret.Event.ENTER_FRAME,e.hit_ebAndMy,e),e.myplane1=new myplane,e.myplane1.x=300,e.myplane1.y=900,e.addChild(e.myplane1),e.myplane1.addEventListener(egret.Event.ENTER_FRAME,e.myplane_move,e),e.addEventListener(egret.Event.ENTER_FRAME,e.hit_meAndBuff,e),e.addEventListener(egret.Event.ENTER_FRAME,e.hit_meAndBloodpack,e),e.addEventListener(egret.Event.ENTER_FRAME,e.hit_bossBulltAndMy,e),e.addEventListener(egret.Event.ENTER_FRAME,e.gameWin,e),e.addEventListener(egret.Event.ENTER_FRAME,e.fail,e),e}return __extends(e,t),e.prototype.touch_location=function(t){this.touch.x=t.stageX,this.touch.y=t.stageY},e.prototype.myplane_move=function(){this.myplane1.x<this.touch.x&&(this.myplane1.x+=this.myplane1.speed),this.myplane1.x>this.touch.x&&(this.myplane1.x-=this.myplane1.speed),this.myplane1.y<this.touch.y&&(this.myplane1.y+=this.myplane1.speed),this.myplane1.y>this.touch.y&&(this.myplane1.y-=this.myplane1.speed)},e.prototype.barChange=function(){if(this.hpv>=0&&this.hpv<=100){var t=this.hpv/100;this.hpValue.scaleX=.7*t}this.hpv<=0&&(this.hpValue.width=0)},e.prototype.bullet_creat=function(){var t=new egret.Timer(200);t.addEventListener(egret.TimerEvent.TIMER,this.judgeModel,this),t.start()},e.prototype.eb_create=function(){var t=new egret.Timer(700);t.addEventListener(egret.TimerEvent.TIMER,this.traverEenemy,this),t.start()},e.prototype.bossAppears=function(){0==this.bossModel&&this.score>=200&&(this.bossObj=new boss,this.bossModel=1,this.addChild(this.bossObj))},e.prototype.bossBullet_create=function(){var t=new egret.Timer(200);t.addEventListener(egret.TimerEvent.TIMER,this.bossb_new,this),t.start()},e.prototype.bossb_new=function(){if("goOn"==this.gameModel&&1==this.bossModel){if(0!=this.recycle_bulletBoss.length)t=this.recycle_bulletBoss.shift(),t.initial(this.bossObj.x+100,this.bossObj.y+100),this.eboss_array.push(t);else{var t=new bossBullet(this.bossObj.x+100,this.bossObj.y+100);this.eboss_array.push(t)}this.addChild(t)}},e.prototype.judgeModel=function(){0==this.bulletModel&&"goOn"==this.gameModel&&this.bullet_new(),1==this.bulletModel&&"goOn"==this.gameModel&&(this.limitAdd-=1,this.bulletAdd_new(),0==this.limitAdd&&(this.bulletModel=0,this.limitAdd=20))},e.prototype.bullet_new=function(){if(0!=this.recycle_bullet.length){var t=this.recycle_bullet.shift();t.initial(this.myplane1.x+62,this.myplane1.y),this.bullet_array.push(t)}else t=new bullet(this.myplane1.x+62,this.myplane1.y),this.bullet_array.push(t);this.addChild(t)},e.prototype.bulletAdd_new=function(){if(0!=this.recycle_bulletAdd.length){var t=this.recycle_bulletAdd.shift();t.initial(this.myplane1.x+62,this.myplane1.y),this.bullet_arrayAdd.push(t)}else t=new bulletAdd(this.myplane1.x+62,this.myplane1.y),this.bullet_arrayAdd.push(t);this.addChild(t)},e.prototype.traverEenemy=function(){for(var t=0;t<this.enemy1_array.length;t++){var e=this.enemy1_array[t].x,i=this.enemy1_array[t].y;e+=40,i+=40,this.eb_new(e,i)}},e.prototype.eb_new=function(t,e){if(0!=this.recycle_eb.length){var i=this.recycle_eb.shift();i.initial(t,e),this.eb_array.push(i)}else{var i=new enemyBullet(t,e);this.eb_array.push(i)}this.addChild(i)},e.prototype.enemy1_creat=function(){var t=new egret.Timer(300);t.addEventListener(egret.TimerEvent.TIMER,this.enemy1_new,this),t.start()},e.prototype.enemy1_new=function(){if("goOn"==this.gameModel){if(0==this.bossModel){var t=0,e=550*Math.random(),i=this.recycle_enemy1[0];void 0!=i?(this.recycle_enemy1.shift(),i.initial(e,t),this.enemy1_array.push(i)):(i=new enemy1(e,t),this.enemy1_array.push(i)),this.addChild(i)}}else this.enemy1_array.splice(0,this.enemy1_array.splice.length),this.recycle_enemy1.splice(0,this.recycle_enemy1.splice.length),this.eb_array.splice(0,this.eb_array.length),this.recycle_eb.splice(0,this.recycle_eb.length)},e.prototype.initProps=function(){var t=new egret.Timer(6e3);t.addEventListener(egret.TimerEvent.TIMER,this.power_new,this),t.start();var e=new egret.Timer(8e3+6e3*Math.random());e.addEventListener(egret.TimerEvent.TIMER,this.bloodpack_new,this),e.start()},e.prototype.power_new=function(){"goOn"==this.gameModel&&(this.buff=new power,this.addChild(this.buff))},e.prototype.bloodpack_new=function(){"goOn"==this.gameModel&&(this.bloodpackObj=new bloodpack,this.addChild(this.bloodpackObj))},e.prototype.hit_target=function(){for(var t=0;t<this.bullet_array.length;t++)for(var e=0;e<this.enemy1_array.length;e++)void 0!=this.bullet_array[t]&&void 0!=this.enemy1_array[e]&&1==this.hitTest(this.bullet_array[t],this.enemy1_array[e])&&0==this.enemy1_array[e].hit&&0==this.bullet_array[t].hit&&(this.bullet_array[t].hit=!0,this.enemy1_array[e].hit=!0,this.score+=10,this.label.text="得分:"+this.score,this.label.y=1200,this.addChild(this.label)),void 0!=this.enemy1_array[e]&&1==this.enemy1_array[e].recycle&&(this.recycle_enemy1.push(this.enemy1_array[e]),this.enemy1_array.splice(e,1)),void 0!=this.bullet_array[t]&&1==this.bullet_array[t].recycle&&(this.recycle_bullet.push(this.bullet_array[t]),this.bullet_array.splice(t,1));if(1==this.bossModel)for(var t=0;t<this.bullet_array.length;t++)void 0!=this.bullet_array[t]&&this.hitTest(this.bullet_array[t],this.bossObj)&&(this.bullet_array[t].hit=!0,this.bossObj.hit=!0,this.bosshp-=5)},e.prototype.hit_targetAdd=function(){for(var t=0;t<this.bullet_arrayAdd.length;t++)for(var e=0;e<this.enemy1_array.length;e++)void 0!=this.bullet_arrayAdd[t]&&void 0!=this.enemy1_array[e]&&1==this.hitTest(this.bullet_arrayAdd[t],this.enemy1_array[e])&&0==this.enemy1_array[e].hit&&0==this.bullet_arrayAdd[t].hit&&(this.bullet_arrayAdd[t].hit=!0,this.enemy1_array[e].hit=!0,this.score+=10,this.label.text="得分:"+this.score,this.label.y=1e3,this.addChild(this.label)),void 0!=this.enemy1_array[e]&&1==this.enemy1_array[e].recycle&&(this.recycle_enemy1.push(this.enemy1_array[e]),this.enemy1_array.splice(e,1)),void 0!=this.bullet_arrayAdd[t]&&1==this.bullet_arrayAdd[t].recycle&&(this.recycle_bulletAdd.push(this.bullet_arrayAdd[t]),this.bullet_arrayAdd.splice(t,1));if(1==this.bossModel)for(var t=0;t<this.bullet_arrayAdd.length;t++)void 0!=this.bullet_arrayAdd[t]&&this.hitTest(this.bullet_arrayAdd[t],this.bossObj)&&(this.bullet_arrayAdd[t].hit=!0,this.bossObj.hit=!0,this.bosshp-=8)},e.prototype.hit_ebAndMy=function(){for(var t=0;t<this.eb_array.length;t++)void 0!=this.eb_array[t]&&(1==this.hitTest(this.eb_array[t],this.myplane1)&&0==this.eb_array[t].hit&&(this.eb_array[t].hit=!0,this.hpv-=4,this.label2.text="HP："+this.hpv,this.addChild(this.label2)),void 0!=this.eb_array[t]&&1==this.eb_array[t].recycle&&(this.recycle_eb.push(this.eb_array[t]),this.eb_array.splice(t,1)))},e.prototype.hit_bossBulltAndMy=function(){for(var t=0;t<this.eboss_array.length;t++)void 0!=this.eboss_array[t]&&(this.hitTest(this.eboss_array[t],this.myplane1)&&0==this.eboss_array[t].hit&&(this.eboss_array[t].hit=!0,this.hpv-=4,this.label2.text="HP："+this.hpv,this.addChild(this.label2)),void 0!=this.eboss_array[t]&&1==this.eboss_array[t].recycle&&(this.recycle_bulletBoss.push(this.eboss_array[t]),this.eboss_array.splice(t,1)))},e.prototype.hit_meAndBuff=function(){void 0!=this.buff&&this.hitTest(this.buff,this.myplane1)&&0==this.buff.hit&&(this.buff.hit=!0,this.bulletModel=1)},e.prototype.hit_meAndBloodpack=function(){void 0!=this.bloodpackObj&&this.hitTest(this.bloodpackObj,this.myplane1)&&0==this.bloodpackObj.hit&&(this.bloodpackObj.hit=!0,this.hpv+=this.bloodAddNum)},e.prototype.fail=function(){this.hpv<=0&&"goOn"==this.gameModel&&(this.gameModel="over",this.overText=new gameover,this.addChild(this.overText))},e.prototype.gameWin=function(){if(this.bosshp<=0&&"goOn"==this.gameModel){this.bossObj.bossRemove=!0,this.gameModel="over";var t=new winfire(this.bossObj.x,this.bossObj.y);this.addChild(t);var e=new gamewin;this.addChild(e)}},e.prototype.hitTest=function(t,e){if(void 0!=t&&void 0!=e){var i=t.getBounds(),s=e.getBounds();return i.x=t.x,i.y=t.y,s.x=e.x,s.y=e.y,i.intersects(s)}return!1},e}(egret.DisplayObjectContainer);__reflect(mainStage.prototype,"mainStage");var myplane=function(t){function e(){var e=t.call(this)||this;return e.speed=12,e.myplane_build(),e}return __extends(e,t),e.prototype.myplane_build=function(){this.me=new egret.Bitmap,this.me.texture=RES.getRes("me_png"),this.me.scaleX=.25,this.me.scaleY=.25,this.addChild(this.me)},e}(egret.Sprite);__reflect(myplane.prototype,"myplane");var power=function(t){function e(){var e=t.call(this)||this;return e.turnLeft=1,e.turnRight=0,e.hit=!1,e.recycle=!1,e.box_build(),e.x=0,e.y=0,e}return __extends(e,t),e.prototype.box_build=function(){this.bpower=new egret.Bitmap,this.bpower.texture=RES.getRes("power_png"),this.addEventListener(egret.Event.ENTER_FRAME,this.box_move,this),this.addChild(this.bpower)},e.prototype.box_move=function(){0==this.hit?(1==this.turnLeft&&(this.y+=10,this.x+=5*Math.random()+5,this.x>550&&(this.turnLeft=0,this.turnRight=1)),1==this.turnRight&&(this.y+=10,this.x-=5*Math.random()+5)):(this.recycle=!0,this.parent.removeChild(this),this.removeEventListener(egret.Event.ENTER_FRAME,this.box_move,this)),this.y>1200&&this.parent&&(this.parent.removeChild(this),this.removeEventListener(egret.Event.ENTER_FRAME,this.box_move,this),this.recycle=!0)},e.prototype.initial=function(){this.hit=!1,this.recycle=!1,this.addEventListener(egret.Event.ENTER_FRAME,this.box_move,this)},e}(egret.Sprite);__reflect(power.prototype,"power");var props=function(t){function e(){var e=t.call(this)||this;return e.bloodpack=new egret.Bitmap,e.bloodpack.texture=RES.getRes("hpadd_png"),e.buff=new egret.Bitmap,e.buff.texture=RES.getRes("power_png"),e.initProps(),e}return __extends(e,t),e.prototype.initProps=function(){var t=new egret.Timer(200);t.addEventListener(egret.TimerEvent.TIMER,this.create_bloodpack,this),t.start()},e.prototype.create_bloodpack=function(){this.addChild(this.bloodpack)},e.prototype.create_buff=function(){},e}(egret.DisplayObjectContainer);__reflect(props.prototype,"props");var recycle=function(){function t(){}return t}();__reflect(recycle.prototype,"recycle");var sound_play=function(){function t(t){var e=RES.getRes(t);e.play(0,1)}return t}();__reflect(sound_play.prototype,"sound_play");var winfire=function(t){function e(e,i){var s=t.call(this)||this;return s.boss_build(),s.x=e-200,s.y=i-100,s}return __extends(e,t),e.prototype.boss_build=function(){var t=RES.getRes("fire_json"),e=RES.getRes("fire_png"),i=new egret.MovieClipDataFactory(t,e);this.bossexp=new egret.MovieClip(i.generateMovieClipData("bossexpp")),this.bossexp.scaleX=1.2,this.bossexp.scaleY=1.2,this.addChild(this.bossexp),this.bossexp.gotoAndPlay(0,1),this.bossexp.addEventListener(egret.Event.COMPLETE,function(t){this.parent&&this.parent.removeChild(this)},this)},e}(egret.Sprite);__reflect(winfire.prototype,"winfire");